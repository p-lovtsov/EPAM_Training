<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>AJAX</title>
</head>
<body>
    <h1>AJAX</h1>
    <label for="inp">Введите адрес:</label>
    <input type="text" id="inp">
    <button id="button">Ввод</button>
    <div id="town"></div>
    <div id="result"></div>
    <script>
        button.addEventListener('click', function () {
            var city = inp.value;
            var res = init(city);
        })
        function init (city) {
            if (city === '') {
                city = 'Москва';
            }
            var locate = 'https://maps.googleapis.com/maps/api/geocode/json?address='+city+'&key=AIzaSyBaUGUScX63cjTTVXd0m5szBaQZNAwhHTU';
            var xhr = new XMLHttpRequest();
            xhr.open('GET', locate, true);
            xhr.send();
            xhr.onreadystatechange = function () {
                if (xhr.readyState != 4) return;
                if (xhr.status != 200) {
                    alert(xhr.status + ': ' + xhr.statusText);
                } else {
                    var json = JSON.parse(xhr.responseText);
                    lat = json.results[0].geometry.location.lat;
                    lng = json.results[0].geometry.location.lng;
                    town.innerHTML = city;
                    result.innerHTML = 'Lat = ' + lat.toFixed(5) +' Lng = ' + lng.toFixed(5);
                    inp.value = '';
                }
            }
        }
    </script>
</body>
</html>